---
import { CV } from "@/CVRepository";
import CardContenent from "@/components/base/cards/CardContenent.astro";
import { filterNonNullEntries } from "@/data-helpers";

const { projects } = CV;
---

<section class={Astro.props.class}>
  <h2>Projects</h2>
  <ul class="grid gap-4 md:grid-cols-2">
    {
      projects.map(
        ({ url, summary, highlights, name, github, image, skills }) => {
          const headerIcons = github
            ? [{ url: github as string, icon: "mdi:github", name: "GitHub" }]
            : undefined;
          const details = filterNonNullEntries({
            Highlights: highlights,
          });
          return (
            <li class="muted-box">
              <CardContenent
                entityTitle={name}
                entityUrl={url}
                headerIcons={headerIcons}
                summary={summary}
                details={details}
                image={image}
                skills={skills}
              />
            </li>
          );
        },
      )
    }
  </ul>
</section>
